<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<title data-rh="true">2.3 互联网身份技术概述 | ICP中文wiki</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/icp-wiki/wiki/互联网身份介绍/2.3互联网身份技术概述"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="2.3 互联网身份技术概述 | ICP中文wiki"><meta data-rh="true" name="description" content="注册"><meta data-rh="true" property="og:description" content="注册"><link data-rh="true" rel="icon" href="/icp-wiki/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/icp-wiki/wiki/互联网身份介绍/2.3互联网身份技术概述"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/icp-wiki/wiki/互联网身份介绍/2.3互联网身份技术概述" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/icp-wiki/wiki/互联网身份介绍/2.3互联网身份技术概述" hreflang="x-default"><link rel="stylesheet" href="/icp-wiki/assets/css/styles.4a260e64.css">
<link rel="preload" href="/icp-wiki/assets/js/runtime~main.0cb8c1f3.js" as="script">
<link rel="preload" href="/icp-wiki/assets/js/main.a3ec7b41.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/icp-wiki/"><div class="navbar__logo"><img src="/icp-wiki/img/logo.svg" alt="Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/icp-wiki/img/logo.svg" alt="Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">ICP中文wiki</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/icpleague/icp-wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/icp-wiki/">互联网计算机 wiki</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/icp-wiki/wiki/互联网计算机介绍/1.1词汇表">wiki</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/icp-wiki/wiki/互联网计算机介绍/1.1词汇表">互联网计算机介绍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/icp-wiki/wiki/互联网身份介绍/2.1什么是互联网身份">互联网身份介绍</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/icp-wiki/wiki/互联网身份介绍/2.1什么是互联网身份">2.1 什么是互联网身份</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/icp-wiki/wiki/互联网身份介绍/2.2Dapp用户的互联网身份">2.2 Dapp 用户的互联网身份</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/icp-wiki/wiki/互联网身份介绍/2.3互联网身份技术概述">2.3 互联网身份技术概述</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/icp-wiki/wiki/面向Dapp用户的互联网计算机/3.1Dapp用户的互联网计算机介绍">面向Dapp用户的互联网计算机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/icp-wiki/wiki/ICP代币持有者、质押者和神经元持有者的互联网计算机/4.1ICP代币">ICP代币持有者、质押者和神经元持有者的互联网计算机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/icp-wiki/wiki/智能合约和Dapp开发人员的互联网计算机/5.1容器（dapps智能合约）">智能合约和Dapp开发人员的互联网计算机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/icp-wiki/wiki/为好奇者、研究人员和区块链爱好者准备的互联网计算机/6.1互联网计算机的性能">为好奇者、研究人员和区块链爱好者准备的互联网计算机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/icp-wiki/wiki/常见问题解答、教程和操作方法/7.1FAQ">常见问题解答、教程和操作方法</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">wiki</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">互联网身份介绍</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/icp-wiki/wiki/互联网身份介绍/2.3互联网身份技术概述">2.3 互联网身份技术概述</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>2.3 互联网身份技术概述</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="注册">注册<a class="hash-link" href="#注册" title="Direct link to heading">​</a></h2><p>当注册一个新的身份锚时，用户的浏览器首先生成一个新的会话密钥对。 一旦用户激活他们的安全设备，它就会生成一个新的密钥对，作为这个身份锚的主密钥对。 然后安全设备签署从主公钥 <code>master_pk</code> 到会话公钥<code>session_pk</code>的委托，以便浏览器可以使用委托人【principal】 <code>SHA224(master_pk) · 0x02</code>下的委托签名来签署 <code>session_pk</code> 下的注册入口消息。</p><p>请注意，对应于 <code>master_pk</code>的密钥永远不会离开安全设备，而对应于 <code>session_pk</code> 的密钥保存在浏览器存储中，其中同源策略屏蔽它不被除互联网身份容器之外的其他容器访问。互联网身份容器创建一个新的互联网身份锚并将主体链接到身份锚。 当用户将附加设备添加到锚点时，互联网身份容器将从新设备的主公钥派生的主体【principal】添加到锚点。</p><p>此身份锚的所有后续操作都必须在与该锚关联的主体【principal】之一下进行身份验证。 如果互联网身份容器源的浏览器内存包含一个具有有效委托的用户浏览器，则用户的浏览器将使用现有的会话密钥对，或者通过重复前面的过程创建一个新的会话密钥对。 请注意，互联网身份不会使用本地存储互联网身份——这就是为什么用户总是必须使用生物识别/点击 Yubikey。 一旦用户关闭选项卡，委托就消失了。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="身份验证">身份验证<a class="hash-link" href="#身份验证" title="Direct link to heading">​</a></h2><p>单个页面加载可能涉及多个签名请求和响应。 为避免用户必须为每条单独的消息激活其安全令牌，用户的浏览器将为每个依赖容器生成会话密钥对，并拥有由 II 容器认证的会话公钥。</p><p>更具体地说，当用户访问依赖容器并单击以使用互联网身份登录时，用户的浏览器会生成一个新的会话密钥对并将其存储在依赖容器的浏览器存储中； 我们将公钥称为  <code>rel_session_pk</code>。 然后将浏览器重定向到互联网身份容器，通过将  <code>rel_session_pk</code>编码为 URL 的一部分来传递它。</p><p>浏览器使用上述身份验证过程签署入口消息以登录到互联网身份容器，这意味着，如果存在互联网身份容器的有效会话密钥，则重新使用它，否则创建新的。</p><p>当用户单击同意对依赖容器进行身份验证时，浏览器会向互联网身份容器创建第二条入口消息（也使用会话公钥签名），其中包含依赖容器身份和依赖会话公钥 <code>rel_session_pk</code></p><p>互联网身份容器为这个用户锚和这个依赖容器计算一个唯一的自我验证主体【principal】作为</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">SHA224(|id_provider| · id_provider · seed) · 02</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>其中seed是根据互联网身份容器持有的秘密盐【secret salt】、用户的身份锚和依赖容器计算的</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">SHA256(|salt| · salt · |anchor| · anchor · |rel_canister_id| · rel_canister_id)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>其中anchor是用户的身份锚点， <code>rel_canister_id</code> 是依赖容器的主体，seed是互联网身份容器持有的秘密种子。</p><p>在初始化互联网身份容器时随机选择盐【salt】，并以互联网身份容器状态存储。 这为试图通过链接属于同一身份锚的主体来跟踪用户的容器提供了一些隐私。 但是，隐私保证不适用于知道助记词的敌手，例如参与互联网身份容器子网的节点提供者。 请注意，这只会影响隐私，不会影响安全性：知道助记词不会使敌手冒充任何用户。</p><p>在其响应中，互联网身份容器包括随机数以及将依赖容器 ID 链接到 <code>rel_session_pk</code> 和到期时间的认证变量（也称为容器签名）。 然后用户的浏览器被重定向到依赖容器，它在 <code>rel_session_pk</code> 下签署入口消息。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="用户体验">用户体验<a class="hash-link" href="#用户体验" title="Direct link to heading">​</a></h2><p><a href="https://identity.ic0.app/" target="_blank" rel="noopener noreferrer">互联网身份</a> <strong>不</strong>使用密码和用户名登录。互联网身份利用 Web 身份验证 (WebAuthn) API 来提供安全的加密身份验证。 这意味着用户通过“他们拥有的东西”（例如电话、yubikey 等）而不是“他们知道的东西”（例如密码）进行身份验证。</p><p>从用户的角度来看，用户将使用以下方法进行身份验证：</p><ol><li>电脑<ol><li>Yubikey 或 Ledger 硬件钱包（带有带 USB 端口的计算机）</li><li>指纹或面部识别（使用具有 <a href="https://en.wikipedia.org/wiki/Touch_ID" target="_blank" rel="noopener noreferrer">Touch ID</a> 或 <a href="https://en.wikipedia.org/wiki/Features_new_to_Windows_10#Windows_Hello" target="_blank" rel="noopener noreferrer">Windows Hello</a> 等电子指纹识别功能的计算机）</li></ol></li><li>智能手机<ol><li>面容 ID（适用于具有面部识别系统的智能手机）</li><li>指纹（适用于具有 <a href="https://en.wikipedia.org/wiki/Touch_ID" target="_blank" rel="noopener noreferrer">Touch ID</a> 等电子指纹识别功能的智能手机）</li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="关键概念">关键概念<a class="hash-link" href="#关键概念" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="锚">锚<a class="hash-link" href="#锚" title="Direct link to heading">​</a></h3><p>锚是附加到用户身份的数字。 这个号码是系统自动生成的，每个身份只有一个。</p><p>例如： <code>193431</code></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="设备">设备<a class="hash-link" href="#设备" title="Direct link to heading">​</a></h3><p>用户可以将许多设备添加到同一个身份锚。 一个常见的例子是用户可以将他们的智能手机和台式计算机添加到身份锚点。 建议添加多个设备，以防用户无法访问设备。 设备名称由用户选择，每个身份可以有多个。</p><p>例如：</p><ul><li><code>&quot;Macbook Pro Alice&quot;</code></li><li><code>&quot;iPhone Alice&quot;</code></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="恢复机制">恢复机制<a class="hash-link" href="#恢复机制" title="Direct link to heading">​</a></h2><p>除了添加多个设备和使用安全密钥外，用户还可以在提示符下通过单击将恢复机制添加到身份锚来设置帐户恢复。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="助记词">助记词<a class="hash-link" href="#助记词" title="Direct link to heading">​</a></h3><p>用户可以选择此选项来生成可用于恢复身份锚的加密安全助记词。 重要的是，用户确保助记词存储在安全的地方并且只有用户知道，因为任何知道助记词的人都将能够完全控制此身份锚。 请注意，用户助记词中的第一个字符串是身份锚。 这个数字开始恢复过程。</p><p>用户必须点击复制按钮然后继续，否则助记词将不会被注册。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="安全密钥">安全密钥<a class="hash-link" href="#安全密钥" title="Direct link to heading">​</a></h3><p>如果用户无法访问其授权设备，则可以使用专用安全密钥来恢复身份锚。 此密钥必须不同于用户使用给定身份锚主动用于对互联网身份进行身份验证的密钥。 此密钥应保存在安全的地方，并确保它仅供用户使用。 如上所述，拥有此安全密钥的任何人都可以完全控制用户的身份锚。 用户需要知道身份锚才能开始恢复。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="安全">安全<a class="hash-link" href="#安全" title="Direct link to heading">​</a></h2><p>互联网身份是在 NNS 网络上运行的容器，因此开发人员可以验证它是否正在运行它声称运行的代码。 要验证代码，请参阅<a href="https://medium.com/dfinity/internet-identity-the-end-of-usernames-and-passwords-ff45e4861bf7" target="_blank" rel="noopener noreferrer">验证互联网身份代码：演练</a>。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="支持">支持<a class="hash-link" href="#支持" title="Direct link to heading">​</a></h2><p>要查看当前对 WebAuthn 的支持，请参阅 <a href="https://caniuse.com/?search=webauthn" target="_blank" rel="noopener noreferrer">WebAuthn 支持</a>。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="另请参阅">另请参阅<a class="hash-link" href="#另请参阅" title="Direct link to heading">​</a></h2><ul><li><a href="/icp-wiki/wiki/互联网身份介绍/2.1什么是互联网身份">什么是互联网身份</a>快速了解什么是互联网身份。</li><li><a href="/icp-wiki/wiki/互联网身份介绍/2.2Dapp用户的互联网身份">Dapp 用户的互联网身份</a>，以了解设置锚点和使用互联网身份的演练。</li><li><a href="https://smartcontracts.org/docs/ic-identity-guide/what-is-ic-identity.html" target="_blank" rel="noopener noreferrer">什么是互联网身份</a></li><li><a href="https://medium.com/dfinity/internet-identity-the-end-of-usernames-and-passwords-ff45e4861bf7" target="_blank" rel="noopener noreferrer">互联网身份：用户名和密码的终结</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/icp-wiki/wiki/互联网身份介绍/2.2Dapp用户的互联网身份"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">2.2 Dapp 用户的互联网身份</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/icp-wiki/wiki/面向Dapp用户的互联网计算机/3.1Dapp用户的互联网计算机介绍"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">3.1 Dapp 用户的互联网计算机介绍</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#注册" class="table-of-contents__link toc-highlight">注册</a></li><li><a href="#身份验证" class="table-of-contents__link toc-highlight">身份验证</a></li><li><a href="#用户体验" class="table-of-contents__link toc-highlight">用户体验</a></li><li><a href="#关键概念" class="table-of-contents__link toc-highlight">关键概念</a><ul><li><a href="#锚" class="table-of-contents__link toc-highlight">锚</a></li><li><a href="#设备" class="table-of-contents__link toc-highlight">设备</a></li></ul></li><li><a href="#恢复机制" class="table-of-contents__link toc-highlight">恢复机制</a><ul><li><a href="#助记词" class="table-of-contents__link toc-highlight">助记词</a></li><li><a href="#安全密钥" class="table-of-contents__link toc-highlight">安全密钥</a></li></ul></li><li><a href="#安全" class="table-of-contents__link toc-highlight">安全</a></li><li><a href="#支持" class="table-of-contents__link toc-highlight">支持</a></li><li><a href="#另请参阅" class="table-of-contents__link toc-highlight">另请参阅</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/icp-wiki/assets/js/runtime~main.0cb8c1f3.js"></script>
<script src="/icp-wiki/assets/js/main.a3ec7b41.js"></script>
</body>
</html>